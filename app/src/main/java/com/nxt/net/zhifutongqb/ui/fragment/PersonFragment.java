package com.nxt.net.zhifutongqb.ui.fragment;import android.app.AlertDialog;import android.content.DialogInterface;import android.content.Intent;import android.support.constraint.ConstraintLayout;import android.util.Log;import android.view.View;import android.widget.ImageView;import android.widget.TextView;import com.bumptech.glide.Glide;import com.bumptech.glide.load.engine.DiskCacheStrategy;import com.nxt.net.zhifutongqb.R;import com.nxt.net.zhifutongqb.app.API;import com.nxt.net.zhifutongqb.ui.activity.SignHistoryActivity;import com.nxt.net.zhifutongqb.base.ZBaseFragment;import com.nxt.net.zhifutongqb.ui.activity.MainActivity;import com.nxt.net.zhifutongqb.utils.CommonUtils;import com.nxt.net.zhifutongqb.utils.ZPreferenceUtils;import butterknife.BindView;import butterknife.ButterKnife;import butterknife.OnClick;/** * Created by Maven on 2017/2/15. * Email: cyjiang_11@163.com * Description: */public class PersonFragment extends ZBaseFragment {    private static final String TAG = "PersonFragment";    @BindView(R.id.iv_person_avatar)    ImageView ivPersonAvatar;    @BindView(R.id.tv_person_user)    TextView tvPersonUser;    @BindView(R.id.person_tv_vip)    TextView personTvVip;    @BindView(R.id.col_person_centre)    ConstraintLayout colPersonCentre;    @BindView(R.id.view)    View view;    @BindView(R.id.tv_person_right)    TextView tvPersonRight;    @BindView(R.id.tv_person_info)    TextView tvPersonInfo;    @BindView(R.id.col_person_me)    ConstraintLayout colPersonMe;    @BindView(R.id.col_person_sign)    ConstraintLayout colPersonAnswer;    @BindView(R.id.col_person_feed_back)    ConstraintLayout colPersonFeedBack;    @BindView(R.id.col_person_update)    ConstraintLayout colPersonUpdate;    @BindView(R.id.col_person_contact)    ConstraintLayout colPersonContact;    @BindView(R.id.col_person_setting)    ConstraintLayout colPersonSetting;    private TextView mTvTitle;    private View mFakeStatusBar;    @Override    protected void initView(View view) {        ButterKnife.bind(this, view);        if (ZPreferenceUtils.getPrefBoolean(API.IS_LOGIN, true)) {            if (CommonUtils.isNetWorkConnected(getActivity())) {                String userPhotoUrl = API.HOST + ZPreferenceUtils.getPrefString(API.USER_PHOTO, "");                Log.e(TAG, "onCreateView: url------------>" + userPhotoUrl);                Glide.with(getActivity()).load(userPhotoUrl)                        .diskCacheStrategy(DiskCacheStrategy.ALL)                        .skipMemoryCache(false)                        .into(ivPersonAvatar);            }        }        tvPersonUser.setText(ZPreferenceUtils.getPrefString(API.USER_NAME, ""));    }    @Override    protected int getLayoutId            () {        return R.layout.fragment_person;    }    @OnClick({R.id.iv_person_avatar, R.id.tv_person_right, R.id.tv_person_info, R.id.col_person_me, R.id.col_person_sign, R.id.col_person_feed_back, R.id.col_person_update, R.id.col_person_contact, R.id.col_person_setting})    public void onClick(View view) {        switch (view.getId()) {            case R.id.iv_person_avatar:                break;            case R.id.tv_person_right:                break;            case R.id.tv_person_info:                break;            case R.id.col_person_me:                break;            case R.id.col_person_sign:                startActivity(new Intent(getActivity(), SignHistoryActivity.class));                break;            case R.id.col_person_feed_back:                break;            case R.id.col_person_update:                break;            case R.id.col_person_contact:                break;            case R.id.col_person_setting:                showLogOutDialog();                break;        }    }    private AlertDialog exitDialog;    private void showLogOutDialog() {        if (exitDialog == null) {            exitDialog = new AlertDialog.Builder(getActivity())                    .setTitle("提示")                    .setMessage("确认注销账户吗?")                    .setNegativeButton("取消", null)                    .setPositiveButton(getString(R.string.ok), new DialogInterface.OnClickListener() {                        @Override                        public void onClick(DialogInterface dialog, int which) {                            MainActivity parentActivity = (MainActivity) getActivity();                            parentActivity.logout();                        }                    }).create();        }        exitDialog.show();    }}