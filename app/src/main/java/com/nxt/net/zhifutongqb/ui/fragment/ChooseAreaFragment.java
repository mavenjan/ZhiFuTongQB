package com.nxt.net.zhifutongqb.ui.fragment;import android.view.View;import android.widget.AdapterView;import android.widget.ListView;import android.widget.TextView;import com.nxt.net.zhifutongqb.R;import com.nxt.net.zhifutongqb.bean.Area;import com.nxt.net.zhifutongqb.ui.activity.WeatherDetailActivity;import com.nxt.net.zhifutongqb.ui.adapter.AreaAdapter;import com.nxt.net.zhifutongqb.widget.MySidebar;import com.nxt.net.zhifutongqb.widget.ZTitleBar;import com.nxt.net.zhifutongqb.base.ZBaseFragment;import com.nxt.net.zhifutongqb.utils.CharacterParser;import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;import java.util.Comparator;import java.util.List;import butterknife.BindView;/** * Created by Maven on 2017/3/1. * Email: cyjiang_11@163.com * Description: */public class ChooseAreaFragment extends ZBaseFragment implements AdapterView.OnItemClickListener {    @BindView(R.id.ztitlebar)    ZTitleBar ztitlebar;    private List<Area> areaList = new ArrayList<>();    private List<String> list = new ArrayList<>();    private ListView mlistview;    private MySidebar mySidebar;    private CharacterParser characterParser;    private TextView nowareatext;    @Override    protected void initView(View view) {        ztitlebar.setLeftLayoutVisibility(View.GONE);        mlistview = (ListView) view.findViewById(R.id.listview_area);        mlistview.setOnItemClickListener(this);        mySidebar = (MySidebar) view.findViewById(R.id.sidebar);        mySidebar.setListView(mlistview);        nowareatext = (TextView) view.findViewById(R.id.tv_nowarea);        nowareatext.setText(getActivity().getIntent().getStringExtra("area"));        characterParser = CharacterParser.getInstance();        list = Arrays.asList(getResources().getStringArray(R.array.city_list));        for (int i = 0; i < list.size(); i++) {            Area area = new Area();            area.setName(list.get(i));            area.setPinyin(characterParser.getSelling(list.get(i)));            area.setHeader(characterParser.getSelling(list.get(i)).substring(0, 1).toUpperCase());            areaList.add(area);        }        //排序        Collections.sort(areaList, new Comparator<Area>() {            @Override            public int compare(Area lhs, Area rhs) {                return lhs.getPinyin().compareTo(rhs.getPinyin());            }        });        mlistview.setAdapter(new AreaAdapter(getActivity(), 0, areaList));    }    @Override    protected int getLayoutId() {        return R.layout.fragment_choose_area;    }    @Override    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {        String weatherArea = areaList.get(position).getName();        if (getActivity() instanceof WeatherDetailActivity) {            WeatherDetailActivity activity = (WeatherDetailActivity) getActivity();            activity.drawerLayout.closeDrawers();            activity.swipeRefresh.setRefreshing(true);            activity.getWeather(weatherArea);            nowareatext.setText(weatherArea);            activity.titleCity.setText(weatherArea);        }    }}